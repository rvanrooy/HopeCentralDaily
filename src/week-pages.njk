---
layout: default
pagination: 
    data: weeks 
    size: 1 
    alias: week 
permalink: "week/{{ week.weekNumber | slugify }}/" 
---

<div class="px-48">

    <ol class="items-center sm:flex pt-12">

        {% for listweek in weeks %}

            <li class="relative mb-6 sm:mb-0">
                <div class="flex items-center">
                    <a href="{{ ['/week/',listweek.weekNumber] | join | url }}">
                        <div class="z-10 flex items-center justify-center w-6 h-6 bg-blue-100 rounded-full ring-0 {{ "ring-green-400 dark:ring-green-300" if week.weekNumber == listweek.weekNumber else "ring-white dark:ring-slate-700" }} dark:bg-blue-900 sm:ring-8  shrink-0">
                            <svg class="w-2.5 h-2.5 text-green-800 dark:text-slate-300" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"/>
                            </svg>
                        </div>
                    </a>
                    <div class="hidden sm:flex w-full bg-gray-200 h-0.5 dark:bg-gray-700"></div>
                </div>
                <div class="mt-3 sm:pe-8">
                    <a href="{{ ['/week/',listweek.weekNumber] | join | url }}">
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Week {{ listweek.weekNumber}}</h3>
                        <a>
                            <time class="block mb-2 text-sm font-normal leading-none text-gray-400 dark:text-gray-500">{{ listweek.endDate | datefmtstr }}</time>
                            <p class="text-base font-normal text-gray-500 dark:text-gray-400">{{ listweek.scripture if listweek.scripture else "TBC" }}
                            </p>
                        </div>
                    </li>

                {% endfor %}

            </ol>

            <ol class="relative border-s border-gray-200 dark:border-gray-700 mt-12">

                {%  for reading in readings%}

                    {% if reading.weekOfYear == week.weekOfYear %}

                        <li x-data="{ isCurrentDate: isDateToday('{{ reading.date }}') }" class="mb-10 ms-4" >
                            <div :class="{ 'bg-blue-400': isCurrentDate, 'bg-gray-200 dark:bg-gray-600': !isCurrentDate }" class="absolute w-3 h-3 rounded-full mt-1.5 -start-1.5 border border-white dark:border-gray-900 "></div>
                            <time class="mb-1 text-sm font-normal leading-none text-gray-400 dark:text-gray-500">Day {{ reading.day }} - {{ reading.date | datefmtstr }}</time>
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
                                <a href="{{ ['/readings/',reading.day] | join | url }}" class="relative block">{{ reading.passage }}</a>
                            </h3>
                            <p class="mb-4 text-base font-normal text-gray-500 dark:text-gray-400">{{ reading.theme }}</p>
                        </li>

                    {% endif %}
                {% endfor %}

            </ol>

        </div>

        <script>
            document.addEventListener('alpine:init', () => {
                console.log("hello from alpine")

                Alpine.data('isDateToday', (date) => {
                    console.log(date)
                    let d1 = new Date(date)
                    let d2 = new Date()

                    return (d1.getFullYear() == d2.getFullYear() && d1.getMonth() == d2.getMonth() && d1.getDate() == d2.getDate())

                });

                Alpine.data('now', () => {
                    return new Date()
                });
            });
        </script>